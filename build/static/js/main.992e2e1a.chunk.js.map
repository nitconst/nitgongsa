{"version":3,"sources":["fbase.js","routes/Auth.js","components/RegisterFactory.js","components/Register.js","components/GongsaStatus.js","components/GongsaList.js","components/ExportExcel.js","components/ReadGongsa.js","components/UserType.js","routes/Home.js","routes/Profile.js","components/Navigation.js","components/Router.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","authService","getAnalytics","getAuth","dbService","getFirestore","storageService","getStorage","Auth","useState","phoneNumber","setPhonenumber","codeNumber","setCodeNumber","isSendSMS","setIsSendSms","isLoading","setIsLoading","appVerifier","window","recaptchaVerifier","defaultOptions","loop","autoplay","animationData","mainAnimationData","rendererSettings","preserveAspectRatio","defaultOptions2","loadingAnimationData","onChanged","event","target","name","value","useEffect","RecaptchaVerifier","size","callback","response","className","class","options","height","width","type","placeholder","onChange","onClick","preventDefault","languageCode","signInWithPhoneNumber","then","confirmationResult","catch","error","console","log","required","confirm","result","user","id","Geocode","setApiKey","setLanguage","setRegion","enableDebug","RegisterFactory","userObj","codeNum","gongsa","setGongsa","attachment","setAttachment","date","setDate","GPSla","setGPSLa","GPSlong","setGPSLong","address","setAddress","arr","setArr","isImgMeta","setIsImgMeta","load","setLoad","admin","meta","useRef","onSubmit","a","attachmentUrl","attachmentRef","ref","uid","uuidv4","uploadString","getDownloadURL","undefined","test","code","region","key","gongsaObj","text","createdAt","GPSLatitude","GPSLongitude","addr","docKey","phone","displayName","createdId","regioncode","StateAdmin","setDoc","doc","location","reload","alert","onClearAttachment","onFileChange","files","theFile","Blob","reader","FileReader","maxSizeMB","maxWidthOrHeight","useWebWorker","imageCompression","compressedFile","onloadend","finishedEvent","currentTarget","readAsDataURL","current","EXIF","getData","exifData","pretty","this","gpsLa","getTag","gpsLaRef","gpsLong","gpsLongRef","la","long","b","i","length","numerator","denominator","dateFirst","split","replaceAll","dateLast","substring","parseInt","parseFloat","setFileData","isNaN","fromLatLng","String","city","state","country","results","formatted_address","substr","address_components","element","j","types","long_name","fileInput","find","htmlFor","accept","src","Register","isHiding","setIsHiding","prev","GongsaStatus","styled","img","GongsaList","isOwner","isEditing","setIsEditing","textEdit","setTextEdit","isDetail","setIsDetail","selectedItem","setSelectedItem","setDocKey","status","handleCancle","index","deleteDoc","deleteObject","handleFileChange","handleSubmit","updateDoc","Number","onChangeHandler","e","codeModifying","toggleEditing","toggleDetail","alt","map","item","ExportExcel","gongsaList","setGongsaList","ExcelFile","ReactExport","ExcelSheet","ExcelColumn","getGongsaList","str","charAt","q","query","collection","orderBy","startAt","endAt","getDocs","querySnapshot","querySnapshotArray","forEach","push","data","where","label","ReadGongsa","isPc","setIsPC","queryObject","setQueryObject","usePagination","limit","items","isStart","isEnd","getPrev","getNext","getGongsaData","indexOf","navigator","platform","toLocaleLowerCase","getGongsaDataByRegion","disabled","UserType","kt","Employee","poclain","Parters","Partner","msg","Submit","Codeobj","Home","isUser","setIsUser","onSnapshot","snapshot","typearr","docs","Profile","newDisplayName","setNewDisplayName","myGongsa","setMyGongsa","gongsaArr","querySnapShot","replace","onLogOutClick","signOut","Navigation","isType","setIsType","style","display","justifyContent","paddingTop","marginRight","to","flexDirection","alignItems","AppRouter","isLoggedIn","refreshUser","path","exact","App","init","setInit","setUserObj","setIsLoggedIn","onAuthStateChanged","ajaxTransport","currentUser","ReactGA","initialize","process","ReactDOM","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.992e2e1a.chunk.js","sourcesContent":["import { initializeApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\nimport { getAnalytics } from \"firebase/analytics\";\n\n// push testing\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDFJzAEwTuo4my8nQ4fsIS_ktyXv2YhN4g\",\n  authDomain: \"gongsa-d233a.firebaseapp.com\",\n  projectId: \"gongsa-d233a\",\n  storageBucket: \"gongsa-d233a.appspot.com\",\n  messagingSenderId: \"772155270923\",\n  appId: \"1:772155270923:web:d64c6b9118ca3cfee8640e\",\n  measurementId: \"G-7F6MDW2NBE\",\n};\n\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app);\n\nexport const authService = getAuth();\nexport const dbService = getFirestore();\nexport const storageService = getStorage();\n","import React, { useEffect, useState } from \"react\";\nimport { authService } from \"fbase\";\nimport { RecaptchaVerifier, signInWithPhoneNumber } from \"firebase/auth\";\nimport Lottie from \"react-lottie\";\nimport mainAnimationData from \"lotties/auth-construction.json\";\nimport loadingAnimationData from \"lotties/loading-construction.json\";\n\nconst Auth = () => {\n  const [phoneNumber, setPhonenumber] = useState(\"\");\n  const [codeNumber, setCodeNumber] = useState(\"\");\n  const [isSendSMS, setIsSendSms] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const appVerifier = window.recaptchaVerifier;\n  const phoneNumberTest = \"+16505551234\";\n  const testVerificationCode = \"123456\";\n\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: mainAnimationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  const defaultOptions2 = {\n    loop: true,\n    autoplay: true,\n    animationData: loadingAnimationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  const onChanged = (event) => {\n    const {\n      target: { name, value },\n    } = event;\n    if (name === \"phone\") {\n      setPhonenumber(value);\n    } else if (name === \"code\") {\n      setCodeNumber(value);\n    }\n  };\n  useEffect(() => {\n    window.recaptchaVerifier = new RecaptchaVerifier(\n      \"recaptcha-container\",\n      {\n        size: \"invisible\",\n        callback: (response) => {\n          // reCAPTCHA solved, allow signInWithPhoneNumber.\n        },\n      },\n      authService\n    );\n  }, []);\n  const onSubmit = (event) => {\n    event.preventDefault();\n    authService.languageCode = \"ko\";\n    // window.recaptchaVerifier = new RecaptchaVerifier(\n    //   \"recaptcha-container\",\n    //   {},\n    //   authService\n    // );\n    setIsLoading(true);\n    signInWithPhoneNumber(authService, \"+82\" + phoneNumber, appVerifier)\n      .then((confirmationResult) => {\n        setIsSendSms(true);\n        // SMS sent. Prompt user to type the code from the message, then sign the\n        // user in with confirmationResult.confirm(code).\n        window.confirmationResult = confirmationResult;\n        setIsLoading(false);\n        // ...\n      })\n      .catch((error) => {\n        console.log(error);\n        // Error; SMS not sent\n        // ...\n      });\n    // signInWithPhoneNumber(authService, phoneNumberTest, appVerifier)\n    //   .then(function (confirmationResult) {\n    //     // confirmationResult can resolve with the fictional testVerificationCode above.\n    //     return confirmationResult.confirm(testVerificationCode);\n    //   })\n    //   .catch(function (error) {\n    //     // Error; SMS not sent\n    //     // ...\n    //   });\n  };\n\n  const onCodeConfirmClick = (event) => {\n    window.confirmationResult\n      .confirm(codeNumber)\n      .then((result) => {\n        // User signed in successfully.\n        const user = result.user;\n        //console.log(user);\n        // ...\n      })\n      .catch((error) => {\n        //console.log(error);\n        // User couldn't sign in (bad verification code?)\n        // ...\n      });\n  };\n  return (\n    <>\n      <div className=\"auth-container\">\n        <div className=\"content\">\n          <span class=\"tag is-warning\">사외공사장 간편신고 웹</span>\n        </div>\n\n        <div className=\"content\">\n          <h1>여기 공사</h1>\n        </div>\n        <Lottie options={defaultOptions} height={200} width={200} />\n        <div className=\"field is-grouped\">\n          <p className=\"control is-expanded\">\n            <input\n              className=\"input\"\n              name=\"phone\"\n              type=\"phone\"\n              placeholder=\"'-'없이 전화번호 입력'\"\n              value={phoneNumber}\n              onChange={onChanged}\n            />\n          </p>\n          <p className=\"control\">\n            <a className=\"button is-link is-rounded\" onClick={onSubmit}>\n              로그인\n            </a>\n          </p>\n          <div>\n            {isLoading && (\n              <Lottie options={defaultOptions2} height={60} width={60} />\n            )}\n          </div>\n        </div>\n\n        <>\n          {isSendSMS && (\n            <div className=\"field is-grouped\">\n              <p className=\"control is-expanded\">\n                <input\n                  className=\"input\"\n                  name=\"code\"\n                  type=\"text\"\n                  placeholder=\"인증번호\"\n                  required\n                  value={codeNumber}\n                  onChange={onChanged}\n                />\n              </p>\n              <p className=\"control\">\n                <a\n                  className=\"button is-dark is-rounded\"\n                  onClick={onCodeConfirmClick}\n                >\n                  인증번호확인\n                </a>\n              </p>\n            </div>\n          )}\n        </>\n        <div id=\"recaptcha-container\"></div>\n      </div>\n    </>\n  );\n};\n\nexport default Auth;\n","// Register 폼 Component\nimport React, { useRef, useState } from \"react\";\nimport { dbService, storageService } from \"../fbase\";\nimport { setDoc, doc } from \"firebase/firestore\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport EXIF from \"exif-js\";\nimport { ref, uploadString, getDownloadURL } from \"firebase/storage\";\nimport Geocode from \"react-geocode\";\nimport imageCompression from \"browser-image-compression\";\nimport Lottie from \"react-lottie\";\nimport loadingAnimationData from \"lotties/loading-construction.json\";\nimport { set } from \"react-ga\";\n\nGeocode.setApiKey(\"AIzaSyBIWmLYzIJmYLxLoRsHchr0OAErLWpKcyI\");\nGeocode.setLanguage(\"ko\");\nGeocode.setRegion(\"kr\");\nGeocode.enableDebug();\n\nconst RegisterFactory = ({ userObj, codeNum }) => {\n  const [gongsa, setGongsa] = useState(\"\");\n  const [attachment, setAttachment] = useState(\"\");\n  const [date, setDate] = useState(\"\"); //시각\n  const [GPSla, setGPSLa] = useState([]); //위도\n  const [GPSlong, setGPSLong] = useState([]); //경도\n  const [address, setAddress] = useState(\"\"); //주소변환\n  const [arr, setArr] = useState([]); //지역변환\n  const [isImgMeta, setIsImgMeta] = useState(false); //메타데이터\n  const [load, setLoad] = useState(true); //로딩표시\n  const [admin, setAdmin] = useState(\"\"); //처리자표시\n  const meta = useRef(null);\n\n  //submit 버튼 클릭 시 이벤트\n  const onSubmit = async (event) => {\n    event.preventDefault();\n    let attachmentUrl = \"\";\n\n    //하이루\n    if (attachment !== \"\" || address !== \"\") {\n      setLoad(false);\n      const attachmentRef = ref(storageService, `${userObj.uid}/${uuidv4()}`);\n      const response = await uploadString(\n        attachmentRef,\n        attachment,\n        \"data_url\"\n      );\n      attachmentUrl = await getDownloadURL(response.ref);\n\n      //지역코드 유효성검사\n      if (test == undefined) {\n        test = {\n          code: \"999\",\n          region: \"기타\",\n        };\n      }\n\n      //게시글 삭제,수정을 위한 고유키 값 부여\n      const key = uuidv4();\n\n      //DB저장 필드\n      const gongsaObj = {\n        text: gongsa,\n        createdAt: date,\n        GPSLatitude: GPSla,\n        GPSLongitude: GPSlong,\n        addr: address,\n        docKey: key,\n        phone: userObj.displayName,\n        createdId: userObj.uid,\n        attachmentUrl,\n        code: 0, //처리코드\n        regioncode: test.code, //지역코드\n        StateAdmin: admin,\n      };\n\n      //key값 부여를 위한 addDoc에서 setDoc으로 함수 변경\n      await setDoc(doc(dbService, \"gongsa\", key), gongsaObj);\n      setGongsa(\"\");\n      setAttachment(\"\");\n\n      window.location.reload();\n    } else {\n      alert(\"위치 기반 이미지 파일 등록은 필수입니다.\");\n      onClearAttachment();\n    }\n  };\n\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setGongsa(value);\n  };\n\n  //file(사진) 등록 시 event\n  const onFileChange = async (event) => {\n    const {\n      target: { files },\n    } = event;\n    const theFile = files[0]; //파일 읽는 상수 선언\n    console.log(\"originalFile instanceof Blob\", theFile instanceof Blob); // true\n    console.log(`originalFile size ${theFile.size / 1024 / 1024} MB`);\n\n    const reader = new FileReader(); //web에 불러오는 상수 선언\n\n    //resize 함수 작성\n    const options = {\n      maxSizeMB: 1,\n      maxWidthOrHeight: 1920,\n      useWebWorker: true,\n    };\n\n    try {\n      const compressedFile = await imageCompression(theFile, options);\n      console.log(\n        \"compressedFile instanceof Blob\",\n        compressedFile instanceof Blob\n      ); // true\n      console.log(\n        `compressedFile size ${compressedFile.size / 1024 / 1024} MB`\n      ); // smaller than maxSizeMB\n      reader.onloadend = (finishedEvent) => {\n        const {\n          currentTarget: { result },\n        } = finishedEvent;\n\n        setAttachment(result);\n      };\n      reader.readAsDataURL(compressedFile);\n      meta.current = compressedFile;\n    } catch (error) {\n      console.log(error);\n    }\n\n    //메타데이터 추출\n    if (theFile && theFile.name) {\n      console.log(theFile);\n      EXIF.getData(theFile, function () {\n        let exifData = EXIF.pretty(this);\n        let gpsLa = EXIF.getTag(this, \"GPSLatitude\");\n        let gpsLaRef = EXIF.getTag(this, \"GPSLatitudeRef\");\n        let gpsLong = EXIF.getTag(this, \"GPSLongitude\");\n        let gpsLongRef = EXIF.getTag(this, \"GPSLongitudeRef\");\n\n        let la = [];\n        let long = [];\n\n        //위경도 api 연동 변수\n        let a = \"\";\n        let b = \"\";\n\n        if (gpsLa) {\n          //exifdata 존재 시 gps 계산 수행\n          console.log(exifData);\n          console.log(gpsLa);\n          console.log(gpsLong);\n          for (let i = 0; i < gpsLa.length; i++) {\n            la[i] = gpsLa[i].numerator / gpsLa[i].denominator;\n          }\n          for (let i = 0; i < gpsLong.length; i++) {\n            long[i] = gpsLong[i].numerator / gpsLong[i].denominator;\n          }\n\n          //값 확인 콘솔\n          console.log(la, long, gpsLaRef, gpsLongRef);\n\n          //사진 시각 정보 설정\n          const dateFirst = EXIF.getTag(this, \"DateTime\")\n            .split(\" \")[0]\n            .replaceAll(\":\", \"-\");\n          const dateLast = EXIF.getTag(this, \"DateTime\")\n            .split(\" \")[1]\n            .substring(-1, 5);\n          setDate(dateFirst + \" \" + dateLast);\n\n          //ref 조건 별 위경도 계산\n          if (gpsLaRef == \"N\") {\n            a =\n              parseInt(la[0]) +\n              (60 * parseInt(la[1]) + parseFloat(la[2])) / 3600;\n          } else {\n            a =\n              -1 * parseInt(la[0]) +\n              (-60 * parseInt(la[1]) + -1 * parseFloat(la[2])) / 3600;\n          }\n          setGPSLa(a);\n\n          if (gpsLongRef == \"E\") {\n            b =\n              parseInt(long[0]) +\n              (60 * parseInt(long[1]) + parseFloat(long[2])) / 3600;\n          } else {\n            b =\n              -1 * parseInt(long[0]) +\n              (-60 * parseInt(long[1]) + -1 * parseFloat(long[2])) / 3600;\n          }\n          setGPSLong(b);\n          setIsImgMeta(true);\n          setFileData(a, b);\n\n          if (isNaN(a) || isNaN(b)) {\n            alert(\n              \"[오류] 사진의 위치정보가 존재하지 않습니다.\\n\\n ㅇ 위치기반 재촬영 방법 \\n Android : 1. 설정>위치>사용 활성화 \\n 2. 카메라>좌측 톱니바퀴 아이콘>위치 태그 활성화 \\n iOS : 1. 설정>카메라>포맷>높은 호환성 체크 \\n 2. 카메라 앱에서 사진 촬영 후, 사진 보관함에서 사진 선택해 추가\"\n            );\n            onClearAttachment();\n          }\n        } else {\n          console.log(date);\n          alert(\n            \"[오류] 사진의 위치정보가 존재하지 않습니다.\\n\\n ㅇ 위치기반 재촬영 방법 \\n Android : 1. 설정>위치>사용 활성화 \\n 2. 카메라>좌측 톱니바퀴 아이콘>위치 태그 활성화 \\n iOS : 1. 설정>카메라>포맷>높은 호환성 체크 \\n 2. 카메라 앱에서 사진 촬영 후, 사진 보관함에서 사진 선택해 추가\"\n          );\n          onClearAttachment();\n          // window.location.reload();\n        }\n        //위경도 기반 주소변환 실행\n      });\n    }\n  };\n\n  //주소변환함수\n  const setFileData = (a, b) => {\n    console.log(GPSla, GPSlong);\n    Geocode.fromLatLng(String(a), String(b)).then(\n      (response) => {\n        //대한민국 제외 주소 DB 저장\n        setAddress(response.results[0].formatted_address.substr(5));\n        let city, state, country;\n        // let add = response.results[0].formatted_address;\n        // let result = add.substr(5);\n        // console.log(result);\n        for (const element of response.results[0].address_components) {\n          for (let j = 0; j < element.types.length; j++) {\n            switch (element.types[j]) {\n              case \"locality\":\n                city = element.long_name;\n                break;\n              case \"administrative_area_level_1\":\n                state = element.long_name;\n                break;\n              case \"country\":\n                country = element.long_name;\n                break;\n            }\n          }\n          console.log(element);\n        }\n\n        //배열에 공백 단위로 주소 나눠넣기\n        setArr(response.results[0].formatted_address.split(\" \"));\n        console.log(city, state, country);\n      },\n      (error) => {\n        console.error(error);\n      }\n    );\n  };\n\n  //clear 버튼 클릭 시\n  const onClearAttachment = () => {\n    setAttachment(\"\");\n    setGongsa(null);\n    setIsImgMeta(false);\n    setAddress(\"\");\n    fileInput.current.value = null;\n  };\n\n  const fileInput = useRef();\n\n  //code 찾기\n  let test = codeNum.find((codeNum) => {\n    return codeNum.region === arr[2];\n  });\n\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: loadingAnimationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  return (\n    <>\n      {load ? (\n        <div>\n          <hr className=\"hr-main\" />\n          <form className=\"boxForm\" onSubmit={onSubmit}>\n            <label htmlFor=\"attach-file\" className=\"imgLabel\">\n              <span>사진 추가 </span>\n              <span className=\"icon\">\n                <i className=\"fas fa-plus\"></i>\n              </span>\n            </label>\n            <input\n              id=\"attach-file\"\n              className=\"img-hide\"\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={onFileChange}\n              ref={fileInput}\n            />\n            {attachment && (\n              <div>\n                <img src={attachment} className=\"reg-temp-img\" />\n                <button\n                  className=\"button is-small is-rounded\"\n                  onClick={onClearAttachment}\n                >\n                  Clear\n                </button>\n              </div>\n            )}\n            <textarea\n              className=\"textarea is-small\"\n              value={gongsa}\n              onChange={onChange}\n              type=\"text\"\n              placeholder=\"공사관련 메모\"\n            />\n            <input\n              className=\"button is-link is-rounded reg-btn\"\n              type=\"submit\"\n              value=\"등록\"\n            />\n            {isImgMeta && (\n              <>\n                <hr />\n                <div className=\"content is-small\">\n                  <h4>주소</h4>\n                  <p>{address}</p>\n                  <h4>시간</h4>\n                  <p>{date}</p>\n                </div>\n              </>\n            )}\n          </form>\n        </div>\n      ) : (\n        <div className=\"auth-container\">\n          <Lottie options={defaultOptions} height={200} width={200} />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default RegisterFactory;\n\n//hi\n","import React, { useState } from \"react\";\nimport RegisterFactory from \"./RegisterFactory\";\n\nconst Register = ({ userObj, codeNum }) => {\n  const [isHiding, setIsHiding] = useState(false);\n  // box 숨기기 toggle\n  const toggleHide = () => {\n    setIsHiding((prev) => !prev);\n  };\n\n  return (\n    <div className=\"content\">\n      <div className=\"box\">\n        <div className=\"box-header\" onClick={toggleHide}>\n          <span className=\"icon\">\n            <i className=\"fas fa-plus is-large\"></i>\n          </span>\n          <p className=\"box-header-text\">공사정보 간편신고</p>\n          <div className=\"div-arrow\">\n            <span className=\"icon\">\n              {isHiding ? (\n                <>\n                  <i className=\"fas fa-angle-down\" />\n                </>\n              ) : (\n                <>\n                  <i className=\"fas fa-angle-right\" />\n                </>\n              )}\n            </span>\n          </div>\n        </div>\n        {isHiding && <RegisterFactory userObj={userObj} codeNum={codeNum} />}\n      </div>\n    </div>\n  );\n};\n\nexport default Register;\n","// 공사 처리상태 Component\nimport React from \"react\";\n\nconst GongsaStatus = ({ gongsaObj }) => {\n  switch (gongsaObj.code) {\n    case 0:\n      return <span className=\"tag is-warning\">신고</span>;\n    case 1:\n      return <span className=\"tag is-light\">처리 중</span>;\n    case 2:\n      return <span className=\"tag is-success\">조치완료</span>;\n    default:\n      return <h4>그냥 로그인</h4>;\n  }\n};\n\nexport default GongsaStatus;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport { deleteDoc, updateDoc, doc } from \"firebase/firestore\";\nimport { dbService, storageService } from \"fbase\";\nimport styled from \"styled-components\";\nimport {\n  ref,\n  deleteObject,\n  uploadString,\n  getDownloadURL,\n} from \"firebase/storage\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport GongsaStatus from \"./GongsaStatus\";\nimport Geocode from \"react-geocode\";\nimport EXIF from \"exif-js\";\nimport imageCompression from \"browser-image-compression\";\nimport Lottie from \"react-lottie\";\nimport loadingAnimationData from \"lotties/loading-construction.json\";\n\nGeocode.setApiKey(\"AIzaSyBIWmLYzIJmYLxLoRsHchr0OAErLWpKcyI\");\nGeocode.setLanguage(\"ko\");\nGeocode.setRegion(\"kr\");\nGeocode.enableDebug();\n\nconst Img = styled.img`\n  height: 100px;\n  width: 60%;\n  border: none;\n`;\n\nconst GongsaList = ({ gongsaObj, isOwner, userObj, codeNum }) => {\n  const [isEditing, setIsEditing] = useState(false);\n  const [textEdit, setTextEdit] = useState(gongsaObj.text);\n  const [attachment, setAttachment] = useState(\"\");\n  const [isDetail, setIsDetail] = useState(false);\n  const [isHiding, setIsHiding] = useState(false);\n  const [selectedItem, setSelectedItem] = useState(gongsaObj.code);\n  const [docKey, setDocKey] = useState(\"\");\n  const [date, setDate] = useState(\"\"); //시각\n  const [GPSla, setGPSLa] = useState([]); //위도\n  const [GPSlong, setGPSLong] = useState([]); //경도\n  const [address, setAddress] = useState(gongsaObj.addr); //주소변환\n  const [arr, setArr] = useState(gongsaObj.addr.split(\" \")); //지역변환\n  const meta = useRef(null);\n  const [load, setLoad] = useState(true);\n  console.log(codeNum);\n  const code = [\n    { code: \"0\", status: \"신고\" },\n    { code: \"1\", status: \"처리 중\" },\n    { code: \"2\", status: \"조치완료\" },\n  ];\n\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: loadingAnimationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  //주소변환함수\n  const setFileData = (a, b) => {\n    Geocode.fromLatLng(String(a), String(b)).then(\n      (response) => {\n        //대한민국 제외 주소 DB 저장\n        setAddress(response.results[0].formatted_address.substr(5));\n        let city, state, country;\n        // let add = response.results[0].formatted_address;\n        // let result = add.substr(5);\n        // console.log(result);\n        for (const element of response.results[0].address_components) {\n          for (let j = 0; j < element.types.length; j++) {\n            switch (element.types[j]) {\n              case \"locality\":\n                city = element.long_name;\n                break;\n              case \"administrative_area_level_1\":\n                state = element.long_name;\n                break;\n              case \"country\":\n                country = element.long_name;\n                break;\n            }\n          }\n        }\n\n        //배열에 공백 단위로 주소 나눠넣기\n        setArr(response.results[0].formatted_address.split(\" \"));\n      },\n      (error) => {\n        console.error(error);\n      }\n    );\n  };\n  //삭제 기능\n  const handleCancle = async (key, index) => {\n    const ok = window.confirm(\"정말 삭제하시겠습니까?\");\n    if (ok) {\n      await deleteDoc(doc(dbService, \"gongsa\", key));\n      await deleteObject(ref(storageService, gongsaObj.attachmentUrl));\n      window.location.reload();\n    }\n  };\n\n  //수정 기능\n  const onChange = (event) => {\n    const {\n      target: { value },\n    } = event;\n    setTextEdit(value);\n  };\n\n  const handleFileChange = async (event) => {\n    const {\n      target: { files },\n    } = event;\n    const theFile = files[0];\n    const reader = new FileReader();\n    //resize 함수 작성\n    const options = {\n      maxSizeMB: 1,\n      maxWidthOrHeight: 1920,\n      useWebWorker: true,\n    };\n\n    try {\n      const compressedFile = await imageCompression(theFile, options);\n      console.log(\n        \"compressedFile instanceof Blob\",\n        compressedFile instanceof Blob\n      ); // true\n      console.log(\n        `compressedFile size ${compressedFile.size / 1024 / 1024} MB`\n      ); // smaller than maxSizeMB\n      reader.onloadend = (finishedEvent) => {\n        const {\n          currentTarget: { result },\n        } = finishedEvent;\n        setAttachment(result);\n      };\n      reader.readAsDataURL(compressedFile);\n      meta.current = compressedFile;\n    } catch (error) {}\n\n    //메타데이터 추출\n    if (theFile && theFile.name) {\n      EXIF.getData(theFile, function () {\n        let exifData = EXIF.pretty(this);\n        let gpsLa = EXIF.getTag(this, \"GPSLatitude\");\n        let gpsLaRef = EXIF.getTag(this, \"GPSLatitudeRef\");\n        let gpsLong = EXIF.getTag(this, \"GPSLongitude\");\n        let gpsLongRef = EXIF.getTag(this, \"GPSLongitudeRef\");\n\n        let la = [];\n        let long = [];\n\n        //위경도 api 연동 변수\n        let a = \"\";\n        let b = \"\";\n\n        if (gpsLa) {\n          //exifdata 존재 시 gps 계산 수행pl\n          for (let i = 0; i < gpsLa.length; i++) {\n            la[i] = gpsLa[i].numerator / gpsLa[i].denominator;\n          }\n          for (let i = 0; i < gpsLong.length; i++) {\n            long[i] = gpsLong[i].numerator / gpsLong[i].denominator;\n          }\n\n          //사진 시각 정보 설정\n          const dateFirst = EXIF.getTag(this, \"DateTime\")\n            .split(\" \")[0]\n            .replaceAll(\":\", \"-\");\n          const dateLast = EXIF.getTag(this, \"DateTime\")\n            .split(\" \")[1]\n            .substring(-1, 5);\n          setDate(dateFirst + \" \" + dateLast);\n\n          //ref 조건 별 위경도 계산\n          if (gpsLaRef == \"N\") {\n            a =\n              parseInt(la[0]) +\n              (60 * parseInt(la[1]) + parseFloat(la[2])) / 3600;\n          } else {\n            a =\n              -1 * parseInt(la[0]) +\n              (-60 * parseInt(la[1]) + -1 * parseFloat(la[2])) / 3600;\n          }\n          setGPSLa(a);\n\n          if (gpsLongRef == \"E\") {\n            b =\n              parseInt(long[0]) +\n              (60 * parseInt(long[1]) + parseFloat(long[2])) / 3600;\n          } else {\n            b =\n              -1 * parseInt(long[0]) +\n              (-60 * parseInt(long[1]) + -1 * parseFloat(long[2])) / 3600;\n          }\n          setGPSLong(b);\n\n          if (isNaN(a) || isNaN(b)) {\n            alert(\n              \"[오류] 사진의 위치정보가 존재하지 않습니다.\\n\\n ㅇ 위치기반 재촬영 방법 \\n Android : 1. 설정>위치>사용 활성화 \\n 2. 카메라>좌측 톱니바퀴 아이콘>위치 태그 활성화 \\n iOS : 1. 설정>카메라>포맷>높은 호환성 체크 \\n 2. 카메라 앱에서 사진 촬영 후, 사진 보관함에서 사진 선택해 추가\"\n            );\n            window.location.reload();\n          }\n        } else {\n          alert(\n            \"[오류] 사진의 위치정보가 존재하지 않습니다.\\n\\n ㅇ 위치기반 재촬영 방법 \\n Android : 1. 설정>위치>사용 활성화 \\n 2. 카메라>좌측 톱니바퀴 아이콘>위치 태그 활성화 \\n iOS : 설정>카메라>포맷>높은 호환성>재촬영 후 사진 보관함에서 사진 선택\"\n          );\n          window.location.reload();\n        }\n        //위경도 기반 주소변환 실행\n        setFileData(a, b);\n      });\n    }\n    console.log(gongsaObj);\n  };\n\n  //업데이트 기능\n  const handleSubmit = async (key) => {\n    setLoad(false);\n    let attachmentUrl = \"\";\n    if (attachment !== \"\") {\n      setLoad(false);\n      await deleteObject(ref(storageService, gongsaObj.attachmentUrl));\n      const attachmentRef = ref(storageService, `${userObj.uid}/${uuidv4()}`);\n      const response = await uploadString(\n        attachmentRef,\n        attachment,\n        \"data_url\"\n      );\n      attachmentUrl = await getDownloadURL(response.ref);\n      console.log(codeNum);\n      let test = codeNum.find((codeNum) => {\n        return codeNum.region === arr[2];\n      });\n      console.log(test);\n\n      if (test == undefined) {\n        test = {\n          code: \"999\",\n          region: \"기타\",\n        };\n      }\n\n      await updateDoc(doc(dbService, \"gongsa\", key), {\n        text: textEdit,\n        createdAt: date,\n        GPSLatitude: GPSla,\n        GPSLongitude: GPSlong,\n        addr: address,\n        docKey: key,\n        attachmentUrl: attachmentUrl,\n        code: selectedItem,\n        regioncode: test.code,\n      });\n    } else if (attachment === \"\") {\n      await updateDoc(doc(dbService, \"gongsa\", key), {\n        text: textEdit,\n        code: Number(selectedItem),\n      });\n    }\n\n    window.location.reload();\n  };\n\n  const onChangeHandler = (e, key) => {\n    setSelectedItem(e.currentTarget.value);\n    // select name이 detail인 경우 (모든 유저가 처리상태 수정하기 위한 부분)\n    if (e.target.name === \"detail\") {\n      setDocKey(gongsaObj.docKey);\n    }\n  };\n\n  // 처리상태 select값 바뀔 때 effect\n  useEffect(() => {\n    // detail인 경우만 처리상태 바로 수정, 아닌 경우는 수정버튼 눌렀을때 수정(handleSubmit 참조)\n    if (isDetail) {\n      codeModifying(docKey);\n    }\n  }, [selectedItem, docKey]);\n\n  // 처리상태 코드만 수정하는 부분\n  const codeModifying = async (key) => {\n    await updateDoc(doc(dbService, \"gongsa\", key), {\n      code: Number(selectedItem),\n    });\n  };\n  const toggleEditing = () => setIsEditing((prev) => !prev);\n  const toggleDetail = () => setIsDetail((prev) => !prev);\n\n  return (\n    <>\n      {load ? (\n        <div>\n          {isEditing ? (\n            <>\n              <div className=\"box edit-box\">\n                <div className=\"field\">\n                  <label className=\"label\">공사사진</label>\n                  <div>\n                    {attachment ? (\n                      <>\n                        <img src={attachment} className=\"reg-temp-img\" alt=\"\" />\n                      </>\n                    ) : (\n                      <>\n                        <img\n                          src={gongsaObj.attachmentUrl}\n                          className=\"reg-temp-img\"\n                          alt=\"\"\n                        />\n                      </>\n                    )}\n                  </div>\n                  <label htmlFor=\"edit-file\" className=\"imgLabel\">\n                    <span>사진 변경 </span>\n                    <span className=\"icon\">\n                      <i className=\"fas fa-edit\"></i>\n                    </span>\n                  </label>\n                  <input\n                    id=\"edit-file\"\n                    className=\"img-hide\"\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handleFileChange}\n                  />\n                </div>\n                <div className=\"field\">\n                  <label className=\"label\">주소</label>\n                  <div className=\"control has-icons-left has-icons-right\">\n                    <input\n                      className=\"input is-small\"\n                      type=\"text\"\n                      placeholder=\"Text input\"\n                      value={address}\n                    />\n                    <span className=\"icon is-small is-left\">\n                      <i className=\"fas fa-addr\"></i>\n                    </span>\n                    <span className=\"icon is-small is-right\">\n                      <i className=\"fas fa-check\"></i>\n                    </span>\n                  </div>\n                  <p className=\"help is-success is-small\">\n                    주소는 사진에 저장된 위치데이터 기반으로 자동생성됩니다.\n                  </p>\n                </div>\n                <div className=\"field\">\n                  <label className=\"label\">처리상태</label>\n                  <div className=\"control\">\n                    <div className=\"select is-small\">\n                      <select\n                        value={selectedItem}\n                        onChange={(e) => onChangeHandler(e, gongsaObj.docKey)}\n                      >\n                        {code.map((item, index) => (\n                          <option key={item.code} value={item.code}>\n                            {item.status}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"field\">\n                  <label className=\"label\">공사메모</label>\n                  <div className=\"control\">\n                    <textarea\n                      className=\"textarea is-small\"\n                      placeholder=\"공사메모 입력\"\n                      onChange={onChange}\n                      value={textEdit}\n                    ></textarea>\n                  </div>\n                </div>\n                <div className=\"field is-grouped\">\n                  <div className=\"control\">\n                    <button\n                      className=\"button is-link is-rounded\"\n                      onClick={() => {\n                        handleSubmit(gongsaObj.docKey);\n                      }}\n                    >\n                      수정\n                    </button>\n                  </div>\n                  <div className=\"control\">\n                    <button\n                      className=\"button is-link is-rounded is-light\"\n                      onClick={toggleEditing}\n                    >\n                      취소\n                    </button>\n                  </div>\n                </div>\n              </div>\n              <hr />\n            </>\n          ) : (\n            <>\n              <article className=\"media\">\n                {isDetail ? (\n                  <div className=\"content is-small content-detail\">\n                    <div className=\"div-arrow\" onClick={toggleDetail}>\n                      <span className=\"icon\">\n                        {isDetail ? (\n                          <>\n                            <i className=\"fas fa-angle-down\" />\n                          </>\n                        ) : (\n                          <>\n                            <i className=\"fas fa-angle-right\"></i>\n                          </>\n                        )}\n                      </span>\n                    </div>\n                    <h4>공사사진</h4>\n                    <img src={gongsaObj.attachmentUrl} alt=\"\" />\n                    <h4>주소</h4>\n                    <p>{gongsaObj.addr}</p>\n                    <h4>처리상태</h4>\n\n                    <div className=\"control\">\n                      <div className=\"select is-small\">\n                        <select\n                          value={selectedItem}\n                          name=\"detail\"\n                          onChange={(e) => onChangeHandler(e, gongsaObj.docKey)}\n                        >\n                          {code.map((item, index) => (\n                            <option key={item.code} value={item.code}>\n                              {item.status}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n                    </div>\n                    <h4>공사메모</h4>\n                    <p>{gongsaObj.text}</p>\n                  </div>\n                ) : (\n                  <>\n                    <figure className=\"media-left\">\n                      <GongsaStatus gongsaObj={gongsaObj} />\n                    </figure>\n                    <div className=\"media-content\">\n                      <div className=\"content content-gongsa\">\n                        <p>\n                          <strong>{gongsaObj.addr}</strong>\n                        </p>\n                        <div className=\"div-arrow\" onClick={toggleDetail}>\n                          <span className=\"icon\">\n                            {isDetail ? (\n                              <>\n                                <i className=\"fas fa-angle-down\" />\n                              </>\n                            ) : (\n                              <>\n                                <i className=\"fas fa-angle-right\" />\n                              </>\n                            )}\n                          </span>\n                        </div>\n                      </div>\n                      {isOwner ? (\n                        <>\n                          <nav className=\"level is-mobile\">\n                            <div className=\"level-left\">\n                              <a className=\"level-item\">\n                                <span className=\"icon is-small\">\n                                  <i\n                                    className=\"fas fa-lg fa-edit\"\n                                    onClick={toggleEditing}\n                                  ></i>\n                                </span>\n                              </a>\n                              <a className=\"level-item\">\n                                <span className=\"icon is-small\">\n                                  <i\n                                    className=\"fas fa-lg fa-trash\"\n                                    onClick={() => {\n                                      handleCancle(gongsaObj.docKey);\n                                    }}\n                                  ></i>\n                                </span>\n                              </a>\n                            </div>\n                            <div className=\"level-right\">\n                              <div className=\"level-item\">\n                                <label className=\"checkbox\">\n                                  <small className=\"time-small\">\n                                    {gongsaObj.createdAt}\n                                  </small>\n                                </label>\n                              </div>\n                            </div>\n                          </nav>\n                        </>\n                      ) : (\n                        <nav className=\"level is-mobile\">\n                          <div className=\"level-left\"></div>\n                          <div className=\"level-right\">\n                            <div className=\"level-item\">\n                              <label className=\"checkbox\">\n                                <small className=\"time-small\">\n                                  {gongsaObj.createdAt}\n                                </small>\n                              </label>\n                            </div>\n                          </div>\n                        </nav>\n                      )}\n                    </div>\n                  </>\n                )}\n              </article>\n              <hr />\n            </>\n          )}\n        </div>\n      ) : (\n        <div className=\"auth-container\">\n          <Lottie options={defaultOptions} height={200} width={200} />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default GongsaList;\n","import {\n  collection,\n  endAt,\n  getDocs,\n  orderBy,\n  query,\n  startAt,\n  where,\n} from \"@firebase/firestore\";\nimport { dbService } from \"fbase\";\nimport React, { useEffect, useState } from \"react\";\nimport ReactExport from \"react-export-excel\";\n\nconst ExportExcel = ({ selectedItem }) => {\n  const [gongsaList, setGongsaList] = useState([]);\n  const ExcelFile = ReactExport.ExcelFile;\n  const ExcelSheet = ReactExport.ExcelFile.ExcelSheet;\n  const ExcelColumn = ReactExport.ExcelFile.ExcelColumn;\n\n  useEffect(() => {\n    console.log(\"dd\");\n    getGongsaList();\n  }, [selectedItem]);\n\n  const getGongsaList = async () => {\n    if (\n      selectedItem === \"100\" ||\n      selectedItem === \"200\" ||\n      selectedItem === \"300\" ||\n      selectedItem === \"400\"\n    ) {\n      const str = selectedItem.charAt(0);\n      const q = query(\n        collection(dbService, \"gongsa\"),\n        orderBy(\"regioncode\"),\n        orderBy(\"createdAt\", \"desc\"),\n        startAt(str),\n        endAt(str + \"\\uf8ff\")\n      );\n\n      const querySnapshot = await getDocs(q);\n      const querySnapshotArray = [];\n      querySnapshot.forEach((doc) => {\n        querySnapshotArray.push(doc.data());\n      });\n      setGongsaList(querySnapshotArray);\n    } else if (selectedItem === \"000\") {\n      const q = query(collection(dbService, \"gongsa\"));\n\n      const querySnapshot = await getDocs(q);\n      const querySnapshotArray = [];\n      querySnapshot.forEach((doc) => {\n        querySnapshotArray.push(doc.data());\n      });\n      setGongsaList(querySnapshotArray);\n    } else {\n      const q = query(\n        collection(dbService, \"gongsa\"),\n        where(\"regioncode\", \"==\", selectedItem)\n      );\n\n      const querySnapshot = await getDocs(q);\n      const querySnapshotArray = [];\n      querySnapshot.forEach((doc) => {\n        querySnapshotArray.push(doc.data());\n      });\n      setGongsaList(querySnapshotArray);\n    }\n  };\n  return (\n    <ExcelFile\n      element={\n        <button className=\"button is-success is-small is-rounded\">\n          <span className=\"icon is-small\">\n            <i className=\"fas fa-file-excel\"></i>\n          </span>\n          <span>엑셀</span>\n        </button>\n      }\n    >\n      {gongsaList.length !== 0 ? (\n        <ExcelSheet data={gongsaList} name=\"Data\">\n          <ExcelColumn label=\"신고자 번호\" value=\"phone\" />\n          <ExcelColumn label=\"주소\" value=\"addr\" />\n          <ExcelColumn label=\"시간\" value=\"createdAt\" />\n        </ExcelSheet>\n      ) : (\n        <></>\n      )}\n    </ExcelFile>\n  );\n};\n\nexport default ExportExcel;\n","import React, { useEffect, useState } from \"react\";\nimport {\n  collection,\n  query,\n  where,\n  orderBy,\n  startAt,\n  endAt,\n} from \"firebase/firestore\";\nimport { dbService } from \"fbase\";\nimport GongsaList from \"./GongsaList\";\nimport { usePagination } from \"use-pagination-firestore\";\nimport ExportExcel from \"./ExportExcel\";\n\nconst ReadGongsa = ({ userObj, codeNum }) => {\n  const [selectedItem, setSelectedItem] = useState(\"000\");\n  const [isPc, setIsPC] = useState(false);\n  // const [firstVisible, setFirstVisible] = useState(null);\n  const [queryObject, setQueryObject] = useState(\n    query(collection(dbService, \"gongsa\"), orderBy(\"createdAt\", \"desc\"))\n  );\n  console.log(codeNum);\n  // usePagination 활용 페이지 구현 페이지당 5개씩\n  const { items, isLoading, isStart, isEnd, getPrev, getNext } = usePagination(\n    queryObject,\n    {\n      limit: 5,\n    }\n  );\n  //firestore data 호출\n  useEffect(() => {\n    getGongsaData();\n    let filter = \"win16|win32|win64|mac|macintel\";\n    if (0 > filter.indexOf(navigator.platform.toLocaleLowerCase())) {\n      setIsPC(false);\n    } else {\n      setIsPC(true);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (selectedItem === \"000\") getGongsaData();\n    else getGongsaDataByRegion();\n  }, [selectedItem]);\n\n  const getGongsaData = () => {\n    setQueryObject(\n      query(collection(dbService, \"gongsa\"), orderBy(\"createdAt\", \"desc\"))\n    );\n  };\n\n  const onChangeHandler = (e) => {\n    setSelectedItem(e.currentTarget.value);\n  };\n\n  const getGongsaDataByRegion = async () => {\n    if (\n      selectedItem === \"100\" ||\n      selectedItem === \"200\" ||\n      selectedItem === \"300\" ||\n      selectedItem === \"400\"\n    ) {\n      const str = selectedItem.charAt(0);\n      setQueryObject(\n        query(\n          collection(dbService, \"gongsa\"),\n          orderBy(\"regioncode\"),\n          orderBy(\"createdAt\", \"desc\"),\n          startAt(str),\n          endAt(str + \"\\uf8ff\")\n        )\n      );\n    } else {\n      setQueryObject(\n        query(\n          collection(dbService, \"gongsa\"),\n          orderBy(\"createdAt\", \"desc\"),\n          where(\"regioncode\", \"==\", selectedItem)\n        )\n      );\n    }\n  };\n\n  //firestore data 표시\n  return (\n    <div className=\"content\">\n      <div className=\"boxForm box\">\n        <div className=\"box-header\">\n          <span className=\"icon\">\n            <i className=\"fas fa-list is-large\"></i>\n          </span>\n          <p className=\"box-header-text\">공사신고 리스트</p>\n        </div>\n        <div className=\"select select-region\">\n          <>{isPc && <ExportExcel selectedItem={selectedItem} />}</>\n          <select value={selectedItem} onChange={(e) => onChangeHandler(e)}>\n            {codeNum.map((item, index) => (\n              <option key={item.code} value={item.code}>\n                {item.region}\n              </option>\n            ))}\n          </select>\n        </div>\n        <hr className=\"hr-main\" />\n        {items.map((gongsa) => (\n          <GongsaList\n            gongsaObj={gongsa}\n            key={gongsa.docKey}\n            userObj={userObj}\n            codeNum={codeNum}\n            isOwner={gongsa.createdId === userObj.uid}\n          />\n        ))}\n        <div className=\"field is-grouped is-grouped-centered\">\n          <p className=\"control\">\n            {\n              //show previous button only when we have items\n\n              <button\n                className=\"button is-small is-rounded is-link\"\n                onClick={() => getPrev()}\n                disabled={isStart}\n              >\n                이전\n              </button>\n            }\n          </p>\n          <p className=\"control\">\n            {\n              //show next button only when we have items\n              <button\n                className=\"button is-small is-rounded is-link\"\n                onClick={() => getNext()}\n                disabled={isEnd}\n              >\n                다음\n              </button>\n            }\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReadGongsa;\n","import React, { useEffect, useState } from \"react\";\nimport { dbService, storageService } from \"../fbase\";\nimport { setDoc, doc } from \"firebase/firestore\";\nimport Lottie from \"react-lottie\";\nimport mainAnimationData from \"lotties/auth-construction.json\";\nimport Employee from \"lotties/69047-vacation.json\";\nimport Partner from \"lotties/95720-business-partners.json\";\nimport {\n  collection,\n  addDoc,\n  query,\n  where,\n  onSnapshot,\n  orderBy,\n} from \"firebase/firestore\";\nimport Register from \"components/Register\";\nimport ReadGongsa from \"components/ReadGongsa\";\nimport { async } from \"@firebase/util\";\n\nconst UserType = ({ userObj }) => {\n  const [selectedItem, setSelectedItem] = useState(\"\");\n\n  const kt = {\n    loop: true,\n    autoplay: true,\n    animationData: Employee,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  const poclain = {\n    loop: true,\n    autoplay: true,\n    animationData: mainAnimationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  const Parters = {\n    loop: true,\n    autoplay: true,\n    animationData: Partner,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  //submit 버튼 클릭 시 이벤트\n  const onClick = (e) => {\n    setSelectedItem(e.currentTarget.value);\n    console.log(selectedItem);\n\n    let a = e.currentTarget.name;\n    let msg = a + \"로 설정하시겠습니까?\";\n    if (window.confirm(msg)) {\n      Submit(e);\n    } else {\n      console.log(\"메롱\");\n    }\n  };\n\n  const Submit = async (e) => {\n    //게시글 삭제,수정을 위한 고유키 값 부여\n    const key = userObj.uid;\n\n    //DB저장 필드\n    const Codeobj = {\n      phone: userObj.displayName,\n      type: e.currentTarget.value,\n    };\n\n    //key값 부여를 위한 addDoc에서 setDoc으로 함수 변경\n    await setDoc(doc(dbService, \"usertype\", key), Codeobj);\n\n    window.location.reload();\n  };\n\n  return (\n    <div className=\"tile is-ancenstor\">\n      <div className=\"tile is-vertical is-fullwidth \">\n        <div class=\"tile is-parent\">\n          <p>\n            <article class=\"tile is-child \">\n              <Lottie options={kt} height={150} width={150} />\n            </article>\n          </p>\n          <button\n            className=\"button is-large is-fullwidth is-child notification is-primary\"\n            value=\"001\"\n            name=\"임직원\"\n            onClick={(e) => onClick(e)}\n          >\n            <p className=\"title\">임직원</p>\n          </button>\n        </div>\n\n        <div class=\"tile is-parent\">\n          <article class=\"tile is-child\">\n            <Lottie options={Parters} height={150} width={150} />\n          </article>\n\n          <button\n            className=\"button is-large is-fullwidth is-child notification is-info\"\n            value=\"002\"\n            name=\"협력사\"\n            onClick={(e) => onClick(e)}\n          >\n            <p className=\"title\">협력사</p>\n          </button>\n        </div>\n\n        <div class=\"tile is-parent\">\n          <article class=\"tile is-child\">\n            <Lottie options={poclain} height={140} width={140} />\n          </article>\n          <button\n            className=\"button is-large is-fullwidth is-child notification is-link\"\n            value=\"003\"\n            name=\"오거크레인/포크레인 기사\"\n            onClick={(e) => onClick(e)}\n          >\n            <p className=\"title\">오거크레인/포크레인 기사</p>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UserType;\n","import React, { useEffect, useState } from \"react\";\nimport Lottie from \"react-lottie\";\nimport { dbService } from \"fbase\";\nimport {\n  collection,\n  addDoc,\n  query,\n  where,\n  onSnapshot,\n  orderBy,\n} from \"firebase/firestore\";\nimport Register from \"components/Register\";\nimport ReadGongsa from \"components/ReadGongsa\";\nimport UserType from \"components/UserType\";\n\nconst Home = ({ userObj, codeNum }) => {\n  const [gongsa, setGongsa] = useState([]);\n  const [isUser, setIsUser] = useState(true);\n\n  useEffect(() => {\n    const type = query(\n      collection(dbService, \"usertype\"),\n      where(\"phone\", \"==\", userObj.displayName)\n    );\n    onSnapshot(type, (snapshot) => {\n      const typearr = snapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      console.log(typearr);\n\n      if (typearr == \"\") {\n        setIsUser(false);\n        console.log(\"메롱\");\n      }\n    });\n  }, []);\n\n  return (\n    <>\n      {isUser ? (\n        <div>\n          <div className=\"container is-mobile\">\n            <section className=\"hero is-small is-link\">\n              <div className=\"hero-body\">\n                <p className=\"title\">여기 공사</p>\n                <p className=\"subtitle\">\n                  스마트폰 카메라 촬영으로 공사 간편신고가 가능한 Web입니다.\n                </p>\n              </div>\n            </section>\n            <article class=\"message is-info is-small\">\n              <div class=\"message-body\">\n                일정 횟수 신고 시 소정의 상품을 등록된 번호로 드립니다.\n              </div>\n            </article>\n            <Register userObj={userObj} codeNum={codeNum} />\n            <ReadGongsa userObj={userObj} codeNum={codeNum} />\n          </div>\n        </div>\n      ) : (\n        <div>\n          <div className=\"container is-mobile\">\n            <div className=\"content is-centered\">\n              <h1>\n                <p>안녕하세요!</p>\n              </h1>\n              <h3>\n                <p>원활한 신고 관리를 위해</p> 최초 1회 사용자 정보 설정이\n                필요합니다.\n              </h3>\n            </div>\n            <UserType userObj={userObj} codeNum={codeNum} />\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport { authService, dbService } from \"fbase\";\nimport { collection, query, where, getDocs } from \"firebase/firestore\";\nimport { onLog } from \"@firebase/app\";\nimport GongsaList from \"components/GongsaList\";\n\nconst Profile = ({ userObj, codeNum }) => {\n  console.log(userObj);\n  const [newDisplayName, setNewDisplayName] = useState(userObj.displayName);\n  const [myGongsa, setMyGongsa] = useState([]);\n\n  useEffect(() => {\n    async function querySnapShot() {\n      const q = query(\n        collection(dbService, \"gongsa\"),\n        where(\"createdId\", \"==\", userObj.uid)\n      );\n\n      const querySnapshot = await getDocs(q);\n      const gongsaArr = querySnapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(), //합쳐서 보여줌\n      }));\n      setMyGongsa(gongsaArr);\n    }\n    querySnapShot();\n    setNewDisplayName(userObj.displayName.replace(\"+82\", \"0\"));\n  }, []);\n  const onLogOutClick = async () => await authService.signOut();\n\n  return (\n    <div className=\"container is-mobile\">\n      <button className=\"button is-ghost is-small\" onClick={onLogOutClick}>\n        로그아웃\n      </button>\n      <div className=\"content\">\n        <div className=\"boxForm box\">\n          <div className=\"box-header\">\n            <span className=\"icon\">\n              <i className=\"fas fa-lg fa-list-check\"></i>\n            </span>\n            <p className=\"box-header-text\">{newDisplayName}님의 공사리스트</p>\n          </div>\n          <hr className=\"hr-main\" />\n          {myGongsa.map((gongsa) => (\n            <GongsaList\n              gongsaObj={gongsa}\n              key={gongsa.docKey}\n              userObj={userObj}\n              codeNum={codeNum}\n              isOwner={gongsa.createdId === userObj.uid}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;\n","import React, { useEffect, useState } from \"react\";\nimport { Outlet, Link } from \"react-router-dom\";\nimport UserType from \"./UserType\";\nimport {\n  collection,\n  addDoc,\n  query,\n  where,\n  onSnapshot,\n  orderBy,\n} from \"firebase/firestore\";\nimport { dbService } from \"fbase\";\n\n//isuser 삼항연산자\n\nconst Navigation = ({ userObj }) => {\n  const [isType, setIsType] = useState(true);\n  console.log(userObj);\n  useEffect(() => {\n    const type = query(\n      collection(dbService, \"usertype\"),\n      where(\"phone\", \"==\", userObj.displayName)\n    );\n    onSnapshot(type, (snapshot) => {\n      const typearr = snapshot.docs.map((doc) => ({\n        id: doc.id,\n        ...doc.data(),\n      }));\n      console.log(typearr);\n\n      if (typearr == \"\") {\n        setIsType(false);\n        console.log(\"메롱\");\n      }\n    });\n  }, []);\n\n  return (\n    <>\n      {isType ? (\n        <div>\n          {/* A \"layout route\" is a good place to put markup you want to\n            share across all the pages on your site, like navigation. */}\n          <nav>\n            <div className=\"nav-header\">\n              <div className=\"nav-content\">\n                <div className=\"nav-brand\"></div>\n                <div className=\"nav-ul\">\n                  <ul\n                    style={{\n                      display: \"flex\",\n                      justifyContent: \"right\",\n                      paddingTop: 20,\n                      marginRight: 20,\n                    }}\n                  >\n                    <li>\n                      <Link to=\"/\">\n                        <span className=\"icon-text is-large\">\n                          <span className=\"icon \">\n                            <i className=\"fas fa-lg fa-home\"></i>\n                          </span>\n                          <span>홈</span>\n                        </span>\n                      </Link>\n                    </li>\n                    <li>\n                      <Link\n                        to=\"/profile\"\n                        style={{\n                          display: \"flex\",\n                          flexDirection: \"column\",\n                          alignItems: \"center\",\n                        }}\n                      >\n                        <span className=\"icon-text is-large\">\n                          <span className=\"icon \">\n                            <i className=\"fas fa-lg fa-user\"></i>\n                          </span>\n                          <span>My</span>\n                        </span>\n                      </Link>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </nav>\n\n          {/* An <Outlet> renders whatever child route is currently active,\n            so you can think about this <Outlet> as a placeholder for\n            the child routes we defined above. */}\n          <Outlet />\n        </div>\n      ) : (\n        <div>\n          {/* A \"layout route\" is a good place to put markup you want to\n          share across all the pages on your site, like navigation. */}\n          <nav>\n            <div className=\"nav-header\">\n              <div className=\"nav-content\">\n                <div className=\"nav-brand\"></div>\n                <div className=\"nav-ul\">\n                  <ul\n                    style={{\n                      display: \"flex\",\n                      justifyContent: \"right\",\n                      paddingTop: 20,\n                      marginRight: 20,\n                    }}\n                  ></ul>\n                </div>\n              </div>\n            </div>\n          </nav>\n\n          {/* An <Outlet> renders whatever child route is currently active,\n          so you can think about this <Outlet> as a placeholder for\n          the child routes we defined above. */}\n          <Outlet />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Navigation;\n","import React from \"react\";\nimport {\n  HashRouter as Router,\n  Routes,\n  Route,\n  Link,\n  Navigate,\n} from \"react-router-dom\";\nimport Auth from \"routes/Auth\";\nimport Home from \"routes/Home\";\nimport Profile from \"routes/Profile\";\nimport Navigation from \"components/Navigation\";\n\nexport default function AppRouter({\n  isLoggedIn,\n  userObj,\n  refreshUser,\n  codeNum,\n}) {\n  return (\n    <div>\n      {/* Routes nest inside one another. Nested route paths build upon\n            parent route paths, and nested route elements render inside\n            parent route elements. See the note about <Outlet> below. */}\n      <Router>\n        <Routes>\n          {isLoggedIn ? (\n            <>\n              <Route path=\"/\" element={<Navigation userObj={userObj} />}>\n                <Route\n                  index\n                  element={<Home userObj={userObj} codeNum={codeNum} />}\n                />\n                <Route\n                  path=\"profile\"\n                  element={\n                    <Profile\n                      userObj={userObj}\n                      refreshUser={refreshUser}\n                      codeNum={codeNum}\n                    />\n                  }\n                />\n                {/* Using path=\"*\"\" means \"match anything\", so this route\n                acts like a catch-all for URLs that we don't have explicit\n                routes for. */}\n              </Route>\n              <Route path=\"*\" element={<Navigate replace to=\"/\" />} />\n            </>\n          ) : (\n            <>\n              <Route exact path=\"/\" element={<Auth />} />\n              <Route path=\"*\" element={<Navigate replace to=\"/\" />} />\n            </>\n          )}\n        </Routes>\n      </Router>\n    </div>\n  );\n}\n\nfunction About() {\n  return (\n    <div>\n      <h2>About</h2>\n    </div>\n  );\n}\n\nfunction NoMatch() {\n  return (\n    <div>\n      <h2>Nothing to see here!</h2>\n      <p>\n        <Link to=\"/\">Go to the home page</Link>\n      </p>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport AppRouter from \"components/Router\";\nimport { authService } from \"fbase\";\nimport Lottie from \"react-lottie\";\nimport loadingAnimationData from \"lotties/loading-construction.json\";\nimport { ajaxTransport } from \"jquery\";\n\nconst App = () => {\n  const [init, setInit] = useState(false);\n  const [userObj, setUserObj] = useState(null);\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  //조직관할 코드 Array(서울 : 1 경기 : 2 인천 : 3 강원 : 4)\n  const codeNum = [\n    { code: \"000\", region: \"전체\" },\n    { code: \"100\", region: \"---서울---\" },\n    { code: \"101\", region: \"강남구\" },\n    { code: \"102\", region: \"강동구\" },\n    { code: \"103\", region: \"강서구\" },\n    { code: \"104\", region: \"관악구\" },\n    { code: \"105\", region: \"구로구\" },\n    { code: \"106\", region: \"금천구\" },\n    { code: \"107\", region: \"동작구\" },\n    { code: \"108\", region: \"서초구\" },\n    { code: \"109\", region: \"송파구\" },\n    { code: \"110\", region: \"양천구\" },\n    { code: \"111\", region: \"영등포구\" },\n    { code: \"200\", region: \"---경기---\" },\n    { code: \"201\", region: \"과천시\" },\n    { code: \"202\", region: \"광명시\" },\n    { code: \"203\", region: \"광주시\" },\n    { code: \"204\", region: \"군포시\" },\n    { code: \"205\", region: \"김포시\" },\n    { code: \"206\", region: \"부천시\" },\n    { code: \"207\", region: \"성남시\" },\n    { code: \"208\", region: \"수원시\" },\n    { code: \"209\", region: \"시흥시\" },\n    { code: \"210\", region: \"안산시\" },\n    { code: \"211\", region: \"안성시\" },\n    { code: \"212\", region: \"안양시\" },\n    { code: \"213\", region: \"여주시\" },\n    { code: \"215\", region: \"오산시\" },\n    { code: \"216\", region: \"용인시\" },\n    { code: \"217\", region: \"의왕시\" },\n    { code: \"218\", region: \"이천시\" },\n    { code: \"219\", region: \"평택시\" },\n    { code: \"220\", region: \"하남시\" },\n    { code: \"221\", region: \"화성시\" },\n    { code: \"300\", region: \"---인천---\" },\n    { code: \"301\", region: \"계양구\" },\n    { code: \"302\", region: \"남구\" },\n    { code: \"303\", region: \"남동구\" },\n    { code: \"304\", region: \"동구\" },\n    { code: \"305\", region: \"부평구\" },\n    { code: \"306\", region: \"연수구\" },\n    { code: \"307\", region: \"옹진군\" },\n    { code: \"308\", region: \"중구\" },\n    { code: \"400\", region: \"---강원---\" },\n    { code: \"401\", region: \"강릉시\" },\n    { code: \"999\", region: \"---기타---\" },\n  ];\n\n  const userNum = [\n    { code: \"001\", type: \"임직원\" },\n    { code: \"002\", type: \"협력사\" },\n    { code: \"003\", type: \"오거크레인/포크레인 기사\" },\n  ];\n\n  const defaultOptions = {\n    loop: true,\n    autoplay: true,\n    animationData: loadingAnimationData,\n    rendererSettings: {\n      preserveAspectRatio: \"xMidYMid slice\",\n    },\n  };\n\n  useEffect(() => {\n    authService.onAuthStateChanged((user) => {\n      //유저상태변화 정보\n      if (user) {\n        setIsLoggedIn(true);\n        setUserObj({\n          displayName: user.phoneNumber, //로그인 시 폰 넘버\n          uid: user.uid, //파이어베이스 제공 식별자\n          code : ajaxTransport.code\n        });\n      } else {\n        setIsLoggedIn(false);\n      }\n      setInit(true);\n    });\n  }, []);\n\n  const refreshUser = () => {\n    const user = authService.currentUser;\n    setUserObj({\n      displayName: user.phoneNumber,\n      uid: user.uid,\n    });\n  };\n\n  // RouteChangeTracker();\n\n  return (\n    <>\n      {init ? (\n        <>\n          <AppRouter\n            isLoggedIn={isLoggedIn}\n            refreshUser={refreshUser}\n            userObj={userObj} //관리\n            codeNum={codeNum}\n          />\n        </>\n      ) : (\n        <div className=\"auth-container\">\n          <Lottie options={defaultOptions} height={200} width={200} />\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport App from \"App\";\nimport Geocode from \"react-geocode\";\nimport firebase from \"firebase/compat/app\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"bulma/css/bulma.min.css\";\nimport \"@fortawesome/fontawesome-free/css/all.min.css\";\nimport \"styles.scss\";\n\n//google analytics(~13)\nimport ReactGA from \"react-ga\";\n\nconst TRACKING_ID = process.env.REACT_APP_GOOGLE_ANALYTICS_TRACKING_ID;\n\nReactGA.initialize(TRACKING_ID);\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}